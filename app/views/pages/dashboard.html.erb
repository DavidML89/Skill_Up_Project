<div data-controller="dashboard">
  <ul class="nav justify-content-center nav-ul tabs" id="myTab" role="tablist">
    <li class="nav-item tab" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Profile</button></li>
    <li class="nav-item tab" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Bookings</button>
    </li>
    <li class="nav-item tab" role="presentation">
      <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Requests</button>
    </li>
  </ul>


  <div class="tab-content" id="myTabContent">

<!-- PROFILE CONTAINER  -->

    <div data-tab-content class="profile-container fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
      <div class="profile-img-text">
        <ul class="li-profile left-side-profile">
          <li class=""><%= image_tag current_user.image, class:"skill-card-img-profile"%></li>
          <li class=""><%=current_user.username%></li>
          <li class=""><%=current_user.age%> years old</li>
          <li class="">Language: <%=current_user.language%></li>
          <li class="">Points:<%=current_user.points%></li>
        </ul>
      </div>
      <div class="skills-i-teach">
        <h2>Skills I can teach:</h2>
        <ul class="each-skill">
          <% @user_skills.each do |user_skill| %>
          <li class="delete-bin-li"><%= user_skill.skill.name %> <%= link_to ('<i class="fa fa-trash fa-lg delete-trash"></i>').html_safe, user_skill_path(user_skill), method: :delete %> <fr data-bs-toggle="modal" data-bs-target="#exampleModal2"> <i class="fa fa-pen fa-lg edit-skill"></i> </fr> </li>
            <p class="skill-desc"> <%= user_skill.description%> </p>
            <!-- MODAL FOR EDIT SKILL -->

          <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModal2Label" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Edit description</h5>
                </div>
                <div class="modal-body">
                  <%= simple_form_for(user_skill) do |f| %>
                  <%= f.input :description %>
                  <%= f.submit value:"Change description", class:"submit-button"%>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
          <% end %>
        </ul>

        <div class="skill-buttons">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
            Add Skill
          </button>
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Add a skill and a description.</h5>
                </div>
                <div class="modal-body">
                  <%= simple_form_for(@new_skill) do |f| %>
                    <%= f.input :skill, collection: @skills %>
                    <%= f.input :description %>
                    <%= f.submit class:"submit-button"%>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>

      <div class="biography-profile">
        <h2>Biography:</h2>
        <p class="biography-p"><%= current_user.description %></p>
        <button type="button" class="btn btn-primary biography-button" data-bs-toggle="modal" data-bs-target="#exampleModal4">
          Edit Bio
        </button>
        <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModal4Label">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                ...
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

<!-- BOOKINGS CONTAINER  -->

    <div data-tab-content class="bookings-container fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      <h2 class="h2-bookings">My Bookings:</h2>
      <div class="bookings-titles">
        <h5></h5>
        <h5>Name</h5>
        <h5>Skill</h5>
        <h5>Status</h5>
        <h5>Date</h5>
        <h5>Delete</h5>
      </div>
      <ul class="bookings-ul">
        <% @bookings.each do |booking| %>
        <li class="li-bookings">
          <div class="li-div-width"><%= image_tag booking.teacher.image, class:"avatar dropdown-toggle"%></div>
          <div class="li-div-width"><%=booking.teacher.username%></div>
          <div class="li-div-width"><%=booking.skill%></div>
          <div class="li-div-width"><%=booking.status%></div>
          <div class="li-div-width"><%=booking.date%></div>
          <div class="li-div-width confirmation-action"><%= link_to ('<i class="fa fa-trash fa-lg"></i>').html_safe, booking_path(booking), method: :delete, class: "btn btn-cancel", data: { confirm: "Are you sure you want to delete this booking?" } %></div>
        </li>
        <% end %>
      </ul>
    </div>

<!-- REQUESTS CONTAINER  -->

    <div data-tab-content class="bookings-container fade" id="contact" role="tabpanel" aria-labelledby="contact-tab" >
      <h2 class="h2-bookings">My Requests:</h2>
      <div class="bookings-titles">
        <h5></h5>
        <h5>Name</h5>
        <h5>Skill</h5>
        <h5>Status</h5>
        <h5>Date</h5>
        <h5>Delete</h5>
      </div>
      <ul class="bookings-ul">
        <% @bookings.each do |booking| %>
        <li class="li-bookings">
          <div class="li-div-width"><%= image_tag booking.teacher.image, class:"avatar dropdown-toggle"%></div>
          <div class="li-div-width"><%=booking.teacher.username%></div>
          <div class="li-div-width"><%=booking.skill%></div>
          <div class="li-div-width"><%=booking.status%></div>
          <div class="li-div-width"><%=booking.date%></div>
          <div class="li-div-width confirmation-action"><%= link_to ('<i class="fa fa-trash fa-lg"></i>').html_safe, booking_path(booking), method: :delete, class: "btn btn-cancel", data: { confirm: "Are you sure you want to delete this booking?" } %></div>
        </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
